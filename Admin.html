<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Key Formatter - Tab Separated</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 p-6 font-sans">
  <div class="max-w-3xl mx-auto bg-white p-6 rounded-xl shadow-md">
    <h1 class="text-2xl font-bold mb-4">Key Formatter (Google Sheets Ready)</h1>

    <!-- Subject Selection -->
    <label class="font-semibold block mb-2">Select Subject:</label>
    <select id="subjectSelect" onchange="updateChapters()" class="w-full p-2 mb-4 border rounded">
      <option value="">-- Choose Subject --</option>
      <option value="physics">Physics</option>
      <option value="zoology">Zoology</option>
      <option value="botany">Botany</option>
      <option value="inorganic_chemistry">Inorganic Chemistry</option>
      <option value="organic_chemistry">Organic Chemistry</option>
      <option value="physical_chemistry">Physical Chemistry</option>
    </select>

    <!-- Chapter Selection -->
    <label class="font-semibold block mb-2">Select Chapter:</label>
    <select id="chapterSelect" class="w-full p-2 mb-4 border rounded">
      <option value="">-- Choose Chapter --</option>
    </select>

    <!-- Key Input -->
    <label class="font-semibold block mb-2">Enter Keys (format: key1:1:pdf,testkey:2:video,...)</label>
    <input id="keyInput" type="text" placeholder="key1:1:pdf,testkey:2:video" class="w-full p-2 mb-4 border rounded"/>

    <!-- Button -->
    <button onclick="generateOutput()" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700">Generate Output</button>

    <!-- Output Area -->
    <div id="outputSection" class="mt-6 hidden">
      <h2 class="text-xl font-semibold mb-2">Formatted Output (Tab-Separated):</h2>
      <textarea id="outputArea" class="w-full h-64 p-3 border border-gray-300 rounded mb-4 font-mono" readonly></textarea>
      <button onclick="copyOutput()" class="bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700">Copy to Clipboard</button>
    </div>
  </div>

  <script>
    const chapters = {
      physics: ["Motion in Plane", "Laws of Motion", "Gravitation"],
      zoology: ["Animal Kingdom", "Human Physiology"],
      botany: ["Plant Physiology", "Genetics"],
      inorganic_chemistry: ["Periodic Table", "Chemical Bonding"],
      organic_chemistry: ["Hydrocarbons", "Alcohols and Ethers"],
      physical_chemistry: ["Mole Concept", "Thermodynamics"]
    };

    function updateChapters() {
      const subject = document.getElementById('subjectSelect').value;
      const chapterSelect = document.getElementById('chapterSelect');
      chapterSelect.innerHTML = '<option value="">-- Choose Chapter --</option>';
      if (chapters[subject]) {
        chapters[subject].forEach(chapter => {
          const opt = document.createElement("option");
          opt.value = chapter;
          opt.textContent = chapter;
          chapterSelect.appendChild(opt);
        });
      }
    }

    function generateOutput() {
      const subject = document.getElementById('subjectSelect').value;
      const keyInput = document.getElementById('keyInput').value;
      if (!subject || !keyInput) {
        alert("Please select subject and enter keys.");
        return;
      }

      const entries = keyInput.split(',').map(k => k.trim()).filter(Boolean);
      let result = "";

      for (const entry of entries) {
        const [keyword, messageId, format] = entry.split(':');
        if (keyword && messageId && format) {
          result += `${keyword}\t${messageId}\t${subject}\t${format}\n`;
        }
      }

      document.getElementById('outputArea').value = result.trim();
      document.getElementById('outputSection').classList.remove('hidden');
    }

    function copyOutput() {
      const output = document.getElementById('outputArea');
      output.select();
      document.execCommand('copy');
      alert("Copied to clipboard! Paste into Google Sheets.");
    }
  </script>
</body>
</html>
